{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\DELL\\\\webpage\\\\src\\\\ImageUpload.js\";\nimport React, { useState } from 'react';\nimport { Button } from '@material-ui/core';\nimport { storage, db } from './firebase';\nimport firebase from \"firebase\";\n\nfunction ImageUpload({\n  username\n}) {\n  const [caption, setCaption] = useState('');\n  const [image, setImage] = useState(null);\n  const [progress, setProgress] = useState(0);\n\n  const handleChange = e => {\n    if (e.target.files[0]) {\n      setImage(e.target.files[0]);\n    }\n  };\n\n  const handleUpload = () => {\n    const uploadTask = storage.ref(`images/${image.name}`).pit(image);\n    uploadTask.on(\"state_changed\", snapshot => {\n      const progress = Math.round(snapshot.bytesTransferred / snapshot.totalBytes * 100);\n      setProgress(progress);\n    }, error => {\n      console.log(error);\n      alert(error.message);\n    }, () => {\n      storage.ref(\"images\").child(image.name).getDownloadURL().then(url => {\n        db.collection(\"posts\").add({\n          timestamp: firebase.firestore.FieldValue.serverTimestamp,\n          caption: caption,\n          imageUrl: url,\n          username: username\n        });\n        setProgress(0);\n        setCaption(\"\");\n        setImage(null);\n      });\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"progress\", {\n    value: progress,\n    max: \"100\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    placeholder: \"Enter a caption...\",\n    onChange: event => setCaption(event.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"file\",\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    onClick: handleUpload,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 11\n    }\n  }, \"Upload\"));\n}\n\nexport default ImageUpload;","map":{"version":3,"sources":["C:/Users/DELL/webpage/src/ImageUpload.js"],"names":["React","useState","Button","storage","db","firebase","ImageUpload","username","caption","setCaption","image","setImage","progress","setProgress","handleChange","e","target","files","handleUpload","uploadTask","ref","name","pit","on","snapshot","Math","round","bytesTransferred","totalBytes","error","console","log","alert","message","child","getDownloadURL","then","url","collection","add","timestamp","firestore","FieldValue","serverTimestamp","imageUrl","event","value"],"mappings":"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","sourcesContent":["import React ,{useState} from 'react'\r\nimport { Button } from '@material-ui/core';\r\nimport {storage,db} from './firebase'\r\nimport firebase from \"firebase\"\r\nfunction ImageUpload({username}) {\r\n\r\nconst [caption,setCaption]=useState('');\r\nconst [image,setImage]=useState(null);\r\nconst [progress,setProgress]=useState(0);\r\n\r\n\r\nconst handleChange=(e)=>{\r\n    if(e.target.files[0]){\r\n        setImage(e.target.files[0])\r\n    }\r\n}\r\n\r\nconst handleUpload=()=>{\r\n   const uploadTask=storage.ref(`images/${image.name}`).pit(image);\r\n   uploadTask.on(\r\n       \"state_changed\",\r\n       (snapshot)=>{\r\n           const progress=Math.round (\r\n               (snapshot.bytesTransferred/snapshot.totalBytes)*100\r\n           );\r\n           setProgress(progress);\r\n       },\r\n       (error)=>{\r\n           console.log(error);\r\n           alert(error.message)\r\n       },\r\n       ()=>{\r\n           storage\r\n           .ref(\"images\")\r\n           .child(image.name)\r\n           .getDownloadURL()\r\n           .then(url=>{\r\n               db.collection(\"posts\").add({\r\n                   timestamp:firebase.firestore.FieldValue.serverTimestamp,\r\n                   caption:caption,\r\n                   imageUrl:url,\r\n                   username:username\r\n               });\r\n               setProgress(0);\r\n               setCaption(\"\");\r\n               setImage(null);\r\n           })\r\n       }\r\n\r\n   )\r\n}\r\n\r\n    return (\r\n        <div>\r\n        <progress value={progress} max=\"100\"></progress>\r\n          <input type=\"text\" placeholder='Enter a caption...' onChange={event=>setCaption(event.target.value)} ></input>\r\n          <input type=\"file\" onChange={handleChange} />\r\n          <Button  onClick={handleUpload}>Upload</Button>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ImageUpload\r\n"]},"metadata":{},"sourceType":"module"}